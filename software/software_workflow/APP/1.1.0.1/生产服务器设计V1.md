# 1. 生产任务下发
## 1.1 业务需求
### 1.1.1 生产任务创建
    生产主管创建生产任务，任务属性包括机器序列号范围，机器类型。
### 1.1.2 生产研发资料
    研发组长在生产任务创建成功后，会收到研发资料上传的信息，机械/电气/软件/工艺组上传资料；
    机械组上传机械图纸版本号；
    电气组上传图纸版本号；
    软件组上传控制卡版本号；

## 1.2 详细设计
### 1.2.1 生产任务创建
#### 1.2.1.1 APP
    生产主管登录APP后，从任务创建界面创建任务；
    生产主管具有任务的创建，删除，修改界面；
    生产任务消息同步到所有流程参与者；
    研发登录账号后，上传资料后，将消息同步到任务创建者，研发人员，装配主管；
#### 1.2.1.2 服务器
    生产任务数据库，生产任务表的定义如下： produce_task: task
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    生产研发资料:
    生产研发资料电气表定义如下： produce_task: electric
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"版本号":"V1.0"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    生产研发资料机械表定义如下： produce_task: machine
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"版本号":"V1.0"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    生产研发资料软件表定义如下： produce_task: software
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"版本号":"V1.0"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    生产研发资料工艺表定义如下： produce_task: technique
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"版本号":"V1.0"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    生产研发资料调试表定义如下： produce_task: debug
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"版本号":"V1.0"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    生产研发资料装配表定义如下： produce_task: install
    {"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"版本号":"V1.0"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}

    业务流程
    1. 查询生产任务列表：
        URL: http://192.168.130.168:80/produceTask/tasks/?token="xxx"
		接口：@app.get("/produceTask/tasks/")
				async def produce_tasks_get(token: str):
		返回格式: {"错误"："", "任务列表":[{"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"}，{"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"}]}

    2. 查询生产任务：
        URL: http://192.168.130.168:80/produceTask/task/?task=P440_10_20240510&token="xxx"
		接口：@app.get("/produceTask/task/")
				async def produce_task_get(task: str, token: str):
		返回格式: {"错误"："", "任务列表":[{"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"}]}

    3. 创建生产任务：
        URL: http://192.168.130.168:80/produceTask/task/?task=P440_10_20240510&min_sn=sn00001&max_sn=sn00010&type=P440&token="xxx"
		接口：@app.put("/produceTask/task/")
				async def produce_task_create(task: str, min_sn: str, max_sn:str, type:str, token: str):
		返回格式: {"错误"："", "任务信息"：{"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}}

    4. 修改生产任务：
        URL: http://192.168.130.168:80/produceTask/task/?task=P440_10_20240510&min_sn=sn00001&max_sn=sn00010&type=P440&token="xxx"
		接口：@app.post("/produceTask/taskUpdate/")
				async def produce_task_update(task: str, min_sn: str, max_sn:str, type:str, token: str):
		返回格式: {"错误"："", "任务信息"：{"任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}}

    5. 删除生产任务：
        URL: http://192.168.130.168:80/produceTask/task/?task=P440_10_20240510&token="xxx"
		接口：@app.del("/produceTask/task/")
				async def produce_task_del(task: str, token: str):
		返回格式: {"错误"："", "删除任务名称":"P440_10_20240510"}

    6. 电气信息查询
        URL: http://192.168.130.168:80/produceTask/electric/?task=P440_10_20240510&token="xxx"
		接口：@app.get("/produceTask/electric/")
				async def produce_task_electric_get(task: str, token: str):
		返回格式: {"错误"："", "任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"文件名":"谷风电气P440_V1.tar"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}

    7. 电气信息修改
        URL: http://192.168.130.168:80/produceTask/electric/?task=P440_10_20240510&file=path&token="xxx"
		接口：@app.post("/produceTask/electric/")
				async def produce_task_electric_update(task: str, file:str, token: str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "最小序列号"："sn00001"，"最大序列号"："sn00010"，"机器类型":"P440"，"文件名":"谷风电气P440_V1.tar"，"创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
        
    8. 电气信息上传
        URL: http://192.168.130.168:80/produceTask/electric/upload/?task=P440_10_20240510&token="xxx"
		接口：@app.post("/produceTask/electric/upload/")
				async def produce_task_electric_upload(task: str, token: str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "文件"：""谷风电气P440_V1.tar""}

    9. 电气信息下载
        URL: http://192.168.130.168:80/produceTask/electric/download/?task=P440_10_20240510&token="xxx"
		接口：@app.post("/produceTask/electric/download/")
				async def produce_task_electric_download(token: str):
    
    10. 机械
        URL: http://192.168.130.168:80/produceTask/machine
    11. 软件
        URL: http://192.168.130.168:80/produceTask/software
    12. 工艺
        URL: http://192.168.130.168:80/produceTask/technique
    13. 装配
        URL: http://192.168.130.168:80/produceTask/debug
    14. 调试
        URL: http://192.168.130.168:80/produceTask/install

# 2. 生产物料
## 2.1 业务需求
### 2.1.1 采购项目确认
    采购对重要物料消息同步，包括供应商，数量，预计到货时间，备注消息；
    采购重要物料消息修改和创建同步给生产主管，研发人员，装配主管；
    仓管可以收到物料即将到货和预期提醒；
### 2.1.2 物料管理
    仓管可以收到物料即将到货提醒；
    物料到货后，线下检查后，更新仓库数量；入料检查不正常时，不入库；
    到货信息同步更新采购，采购确认任务物料到位；
    领料记录，由领料人发起申请，仓管同意后，领料人收到物料后，仓管和领料人确认领料单无异常后，领料成功；
    仓管可以将已有不明物料转移到指定到任务；
    仓管可以增加和修改物料表(初始化物料数据库)；
    仓管对返厂物料和是否寄回进行跟踪：

## 2.2 详细设计
### 2.2.1 采购项目确认
#### 2.2.1.1 APP
    采购对物料项目进行增删改查；
    采购对物料入库进行确认；
#### 2.2.1.2 服务器
    物料提醒表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"预计到货时间"："2024-04-10 10:00:00", "到货数量"："0","状态"："逾期/到货提醒", "提示时间"："2024-04-10 10:00:00"}
    物料数据库采购表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"预计到货时间"："2024-04-10 10:00:00", "备注"："", "到货数量"："1", "修改时间"："2024-04-10 10:00:00"}

    业务流程
    1. 采购查询生产任务的采购物料：
        URL: http://192.168.130.168:80/produceTask/purchase/?task=P440_10_20240510&token="xxx"
		接口：@app.get("/produceTask/purchase/")
				async def produce_task_purchases(task: str, token: str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料"：[{"物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"预计到货时间"："2024-04-10 10:00:00", "备注"："", "到货数量"："1"}, {"物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"预计到货时间"："2024-04-10 10:00:00", "到货数量"："0", "备注"："", "到货数量"："1"}]}
    
    2. 采购修改生产任务的采购物料：
        URL: http://192.168.130.168:80/produceTask/purchase/?task=P440_10_20240510&name=激光器&num=1&supply=大族&time="2024-04-10 10:00:00"&detail=xxx&token="xxx"
		接口：@app.get("/produceTask/purchase/")
				async def produce_task_purchases(name：str，num：str，supply:str,time:str,detail:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"预计到货时间"："2024-04-10 10:00:00", "备注"：""}

### 2.2.2 物料管理
#### 2.2.1.1 APP
    仓管可以对物料项目进行增删改查；
    领料人提交领料申请，领料成功后，点击领料成功，等待领料人和仓管确认后，领料结束；
#### 2.2.1.2 服务器
    物料数据库进库表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"："","到货时间"："2024-04-10 10:00:00", "到货数量"："1","修改时间"："2024-04-10 10:00:00"}
    物料数据库出库表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"供应商":"大族"，"出货时间"："2024-04-10 10:00:00", "出货数量"："1","领料人"："张杰"， 物料管理人"："聂工"，"领料人确认"："1", "仓管确认"："1"}
    物料数据库物料表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"供应商":"大族"，"数量"："1", "创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}

    返厂物料表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"供应商":"大族"，"数量"："-1", "状态"："返厂", "创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    返厂物料表出场表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"供应商":"大族"，"数量"："1", "状态"："返厂", "创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}
    返厂物料表入场表定义如下：
    {"任务名称":"P440_10_20240510", "物料名称"："激光器"，"供应商":"大族"，"数量"："1", "状态"："返厂已寄回", "创建时间"："2024-04-10 10:00:00", "修改时间"："2024-04-10 10:00:00"}

    业务流程
    1. 仓管创建进库记录：
    URL: http://192.168.130.168:80/produceTask/store/receive/?task=P440_10_20240510&name=激光器&num=1&supply=大族&sn=sn000001&token="xxx"
		接口：@app.post("/produceTask/store/receive/")
				async def produce_task_store_create(task：str, name：str，num：str，supply:str,sn:str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}

    2. 仓管删除进库记录：
    URL: http://192.168.130.168:80/produceTask/store/receive/?task=P440_10_20240510&name=激光器&num=1&supply=大族&sn=sn000001&token="xxx"
		接口：@app.delete("/produceTask/store/")
				async def produce_task_store_delete(task：str, name：str，num：str，supply:str,sn:str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"：""，"供应商":""，"设备标签"：""}

    3. 仓管查询进库记录：
    URL: http://192.168.130.168:80/produceTask/store/receive/?task=P440_10_20240510&token="xxx"
		接口：@app.get("/produceTask/store/")
				async def produce_task_store_get(task：str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料列表":[{"物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}, {"物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}]}

    4. 仓管创建物料记录：
        URL: http://192.168.130.168:80/produceTask/store/material/?task=P440_10_20240510&name=激光器&num=1&supply=大族&token="xxx"
		接口：@app.post("/produceTask/store/material/")
				async def produce_task_store_material_create(task：str, name：str，num：str，supply:str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}

    5. 仓管删除物料记录：
        URL: http://192.168.130.168:80/produceTask/store/material/?task=P440_10_20240510&name=激光器&num=1&supply=大族&token="xxx"
		接口：@app.delete("/produceTask/store/material/")
				async def produce_task_store_material_delete(task：str, name：str，num：str，supply:str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}

    6. 仓管查询物料记录：
        URL: http://192.168.130.168:80/produceTask/store/material/?task=P440_10_20240510&token="xxx"
		接口：@app.get("/produceTask/store/material/")
				async def produce_task_store_material_get(task：str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料列表"：[{"激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}, {"激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}]}

    7. 仓管创建出库记录：
        URL: http://192.168.130.168:80/produceTask/store/provide/?task=P440_10_20240510&name=激光器&num=1&supply=大族&token="xxx"
		接口：@app.post("/produceTask/store/provide/")
				async def produce_task_store_provide_create(task：str, name：str，num：str，supply:str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}

    8. 仓管删除出库记录：
        URL: http://192.168.130.168:80/produceTask/store/provide/?task=P440_10_20240510&name=激光器&num=1&supply=大族&token="xxx"
            接口：@app.delete("/produceTask/store/provide/")
                    async def produce_task_store_provide_del(task：str, name：str，num：str，supply:str,token:str):
            返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料名称"："激光器"，"数量"："1"，"供应商":"大族"，"设备标签"：""}

    9. 仓管查询出库记录：
        URL: http://192.168.130.168:80/produceTask/store/provide/?task=P440_10_20240510&token="xxx"
		接口：@app.get("/produceTask/store/provide/")
				async def produce_task_store_provide_get(task：str,token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料出库":[{"物料名称"："激光器"，"供应商":"大族"，"出货时间"："2024-04-10 10:00:00", "出货数量"："1","领料人"："张杰"， 物料管理人"："聂工"，"领料人确认"："1", "仓管确认"："1"}， {"物料名称"："激光器"，"供应商":"大族"，"出货时间"："2024-04-10 10:00:00", "出货数量"："1","领料人"："张杰"， 物料管理人"："聂工"，"领料人确认"："1", "仓管确认"："1"}]}

    10. 领料人出库确认记录：
        URL: http://192.168.130.168:80/produceTask/store/provide/?task=P440_10_20240510&name=激光器&num=1&token="xxx"
		接口：@app.post("/produceTask/store/provide/")
				async def produce_task_store_provide_update(task：str, name:str, num:str, token:str):
        返回格式: {"错误"："", "任务名称":"P440_10_20240510", "物料出库":[{"物料名称"："激光器"，"供应商":"大族"，"出货时间"："2024-04-10 10:00:00", "出货数量"："1","领料人"："张杰"， 物料管理人"："聂工"，"领料人确认"："1", "仓管确认"："1"}]}

# 3. 装配管理
## 3.1 业务需求
### 3.1.1 装配任务分配
    组长指定任务分配，指定哪台机的装配任务的开始时间和预计完成时间，推送执行人消息
### 3.1.2 装配进度
    组长更新任务分配的进度，推送执行人消息
### 3.1.3 装配验收申请
    组长创建验收申请，推送执行人消息
### 3.1.4 装配验收
    验收提交，推送申请人消息
### 3.1.5 物料管理
    物料异常时，提交物料返场维修，推送仓管消息

## 3.2 详细设计
### 3.2.1 APP
### 3.2.1 服务器
    装配任务分配和进度表定义：
    {"任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配项目"："成型缸装配"，"进度":"", "时间"："", "备注"：""，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}
    装配验收申请：
    {"任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配验收申请人"："user"，"申请时间"："2024-04-10 10:00:00"}
    装配验收：
    {"任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配项目"："成型缸装配"，"验收结果"："异常"，"验收备注"："接线不规范，需重新接线"，"创建时间"："2024-04-10 10:00:00"， "修改时间"："2024-04-10 10:00:00"}

    业务流程
    1. 装配主管创建任务：
        URL: http://192.168.130.168:80/produceTask/install/task/?task=P440_10_20240510&sn=sn000001&item=成型缸装配&time=1&user=jack&token="xxx"
        接口：@app.post("/produceTask/install/task/")
                    async def produce_task_install_create(task：str, sn：str，item：str，time:str,token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配项目"："成型缸装配"，"进度":"", "时间"："", "备注"：""，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    2. 装配主管删除任务：
        URL: http://192.168.130.168:80/produceTask/install/task/?task=P440_10_20240510&sn=sn000001&item=成型缸装配&user=jack&token="xxx"
        接口：@app.delete("/produceTask/install/task/")
                    async def produce_task_install_delete(task：str, sn：str，item：str，user:str,token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配项目"："成型缸装配"，"进度":"", "时间"："", "备注"：""，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    3. 执行人更新创建任务：
        URL: http://192.168.130.168:80/produceTask/install/task/?task=P440_10_20240510&sn=sn000001&item=成型缸装配&process=100&time=6&detail=完成&token="xxx"
        接口：@app.put("/produceTask/install/task/")
                    async def produce_task_install_create(task：str, sn：str，item：str，time:str,token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配项目"："成型缸装配"，"进度":"100", "时间"："6", "备注"："完成"，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    4. 装配主管查询任务：
        URL: http://192.168.130.168:80/produceTask/install/task/?task=P440_10_20240510&sn=sn000001&token="xxx"
        接口：@app.get("/produceTask/install/task/")
                    async def produce_task_install_get(task：str, sn：str, token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"装配任务"：[{"装配项目"："成型缸装配"，"进度":"100", "时间"："6", "备注"："完成"，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"},{"装配项目"："成型缸装配"，"进度":"100", "时间"："6", "备注"："完成"，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}]}

    5. 创建装配验收申请
        URL: http://192.168.130.168:80/produceTask/install/check/?task=P440_10_20240510&sn=sn000001&token="xxx"
        接口：@app.post("/produceTask/install/check/")
                    async def produce_task_install_check_create(task：str, sn：str, token:str):
                返回格式: {"错误"："", "装配验收申请": ""}

    6. 查询装配验收申请
        URL: http://192.168.130.168:80/produceTask/install/check/?task=P440_10_20240510&token="xxx"
        接口：@app.get("/produceTask/install/check/")
                    async def produce_task_install_check_get(task：str, token:str):
                返回格式: {"错误"："", "装配验收申请": [{"机器名称"："sn00001", "装配验收申请人"："user"，"申请时间"："2024-04-10 10:00:00"}, {"机器名称"："sn00002", "装配验收申请人"："user"，"申请时间"："2024-04-10 10:00:00"}]}

    7. 删除装配验收申请
        URL: http://192.168.130.168:80/produceTask/install/check/?task=P440_10_20240510&sn=sn000001&token="xxx"
        接口：@app.delete("/produceTask/install/check/")
                    async def produce_task_install_check_del(task：str, sn：str, token:str):
                返回格式: {"错误"："", "装配验收申请删除": ""}

    8. 查询装配验收结果
        URL: http://192.168.130.168:80/produceTask/install/check/result/?task=P440_10_20240510&sn=sn00001&token="xxx"
        接口：@app.get("/produceTask/install/check//result/")
                    async def produce_task_install_check_result_get(task：str, sn：str,token:str):
                返回格式: {"错误"："", "机器名称"："sn00001", "验收项目"：[{"装配项目"："成型缸装配"，"验收结果"："异常"，"验收备注"："1.接线不规范，需重新接线(张工) 2.机械表面受损(萧工)"，"修改时间"："2024-04-10 10:00:00"}， {"装配项目"："成型缸装配"，"验收结果"："异常"，"验收备注"："1.接线不规范，需重新接线(张工) 2.机械表面受损(萧工)"，"修改时间"："2024-04-10 10:00:00"}]}

    9. 更新装配验收结果
        URL: http://192.168.130.168:80/produceTask/install/check/result/?task=P440_10_20240510&sn=sn00001&item=xxx&result=xxx&detail=xxx&token="xxx"
        接口：@app.put("/produceTask/install/check//result/")
                    async def produce_task_install_check_result_update(task：str, sn：str,token:str):
                返回格式: {"错误"："", "机器名称"："sn00001", "装配项目"："成型缸装配"，"验收结果"："异常"，"验收备注"："1.接线不规范，需重新接线(张工) 2.机械表面受损(萧工)"，"修改时间"："2024-04-10 10:00:00"}

# 4. 调试管理
## 4.1 调试需求
### 4.1.1 调试任务分配
    组长指定任务分配，指定哪台机的调试任务的开始时间和预计完成时间， 推送执行人消息
### 3.1.2 装配进度
    组长更新任务分配的进度， 推送执行人消息
### 3.1.3 装配验收申请
    组长创建验收申请， 推送执行人消息
### 3.1.4 装配验收
    验收提交， 推送申请人消息
### 3.1.5 物料管理
    物料异常时，提交物料返场维修， 推送申请人消息

## 4.2.1 APP
### 3.2.1 服务器
    调试任务分配和进度表定义：
    {"任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试项目"："成型缸调试"，"进度":"", "时间"："", "备注":"", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}
    调试验收申请：
    {"任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试项目"："成型缸"，"申请时间"："2024-04-10 10:00:00"}
    调试验收：
    {"任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试项目"："成型缸"，"验收结果"："异常"，"备注"："传感器安装不规范，需要调整"，"创建时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    业务流程
    1. 调试主管创建任务：
        URL: http://192.168.130.168:80/produceTask/debug/task/?task=P440_10_20240510&sn=sn000001&item=成型缸调试&time=1&user=jack&token="xxx"
        接口：@app.post("/produceTask/debug/task/")
                    async def produce_task_debug_create(task：str, sn：str，item：str，time:str,token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试项目"："成型缸调试"，"进度":"", "时间"："", "备注"：""，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    2. 调试主管删除任务：
        URL: http://192.168.130.168:80/produceTask/debug/task/?task=P440_10_20240510&sn=sn000001&item=成型缸调试&user=jack&token="xxx"
        接口：@app.delete("/produceTask/debug/task/")
                    async def produce_task_debug_delete(task：str, sn：str，item：str，user:str,token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试项目"："成型缸调试"，"进度":"", "时间"："", "备注"：""，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    3. 执行人更新创建任务：
        URL: http://192.168.130.168:80/produceTask/debug/task/?task=P440_10_20240510&sn=sn000001&item=成型缸调试&process=100&time=6&detail=完成&token="xxx"
        接口：@app.put("/produceTask/debug/task/")
                    async def produce_task_debug_create(task：str, sn：str，item：str，time:str,token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试项目"："成型缸调试"，"进度":"100", "时间"："6", "备注"："完成"，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}

    4. 调试主管查询任务：
        URL: http://192.168.130.168:80/produceTask/debug/task/?task=P440_10_20240510&sn=sn000001&token="xxx"
        接口：@app.get("/produceTask/debug/task/")
                    async def produce_task_debug_get(task：str, sn：str, token:str):
                返回格式: {"错误"："", "任务名称":"P440_10_20240510", "机器名称"："sn00001"，"调试任务"：[{"调试项目"："成型缸调试"，"进度":"100", "时间"："6", "备注"："完成"，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"},{"调试项目"："成型缸调试"，"进度":"100", "时间"："6", "备注"："完成"，"分配人":"jack", "开始时间"："2024-04-10 10:00:00", "预计完成时间"："2024-04-10 10:00:00"，"修改时间"："2024-04-10 10:00:00"}]}

    5. 创建调试验收申请
        URL: http://192.168.130.168:80/produceTask/debug/check/?task=P440_10_20240510&sn=sn000001&item=xxxx&token="xxx"
        接口：@app.post("/produceTask/debug/check/")
                    async def produce_task_debug_check_create(task：str, sn：str, item：str, token:str):
                返回格式: {"错误"："", "调试验收申请": "xxx"}

    6. 查询调试验收申请
        URL: http://192.168.130.168:80/produceTask/debug/check/?task=P440_10_20240510&token="xxx"
        接口：@app.get("/produceTask/debug/check/")
                    async def produce_task_debug_check_get(task：str, token:str):
                返回格式: {"错误"："", "调试验收申请": [{"机器名称"："sn00001", "调试验收申请人"："user"，"申请时间"："2024-04-10 10:00:00"}, {"机器名称"："sn00002", "调试验收申请人"："user"，"申请时间"："2024-04-10 10:00:00"}]}

    7. 删除调试验收申请
        URL: http://192.168.130.168:80/produceTask/debug/check/?task=P440_10_20240510&sn=sn000001&item=xxxx&token="xxx"
        接口：@app.delete("/produceTask/debug/check/")
                    async def produce_task_debug_check_del(task：str, sn：str, item：str, token:str):
                返回格式: {"错误"："", "调试验收申请删除": ""}

    8. 查询调试验收结果
        URL: http://192.168.130.168:80/produceTask/debug/check/result/?task=P440_10_20240510&sn=sn00001&token="xxx"
        接口：@app.get("/produceTask/debug/check//result/")
                    async def produce_task_debug_check_result_get(task：str, sn：str,token:str):
                返回格式: {"错误"："", "机器名称"："sn00001", "验收项目"：[{"调试项目"："成型缸调试"，"验收结果"："异常"，"验收备注"："1.接线不规范，需重新接线(张工) 2.机械表面受损(萧工)"，"修改时间"："2024-04-10 10:00:00"}， {"调试项目"："成型缸调试"，"验收结果"："异常"，"验收备注"："1.接线不规范，需重新接线(张工) 2.机械表面受损(萧工)"，"修改时间"："2024-04-10 10:00:00"}]}

    9. 更新调试验收结果
        URL: http://192.168.130.168:80/produceTask/debug/check/result/?task=P440_10_20240510&sn=sn00001&item=xxx&result=xxx&detail=xxx&token="xxx"
        接口：@app.put("/produceTask/debug/check//result/")
                    async def produce_task_debug_check_result_update(task：str, sn：str,token:str):
                返回格式: {"错误"："", "机器名称"："sn00001", "调试项目"："成型缸调试"，"验收结果"："异常"，"验收备注"："1.接线不规范，需重新接线(张工) 2.机械表面受损(萧工)"，"修改时间"："2024-04-10 10:00:00"}

# 5. 用户管理
## 5.1 业务需求
## 5.1.1 分配组和组长
    系统管理员创建组和组长。
## 5.1.2 组长组员管理
    组长可以增删改查组员信息。

## 5.2 详细设计
## 5.2.1 APP
## 5.2.2 服务器
    组表定义：
    {"组名"："电气"，"组成员角色"：["组长"，"电工"，"外协"，"装配检测","调试检测"]，"成员"：["",""], "组长"：""，"电工"："", "外协"："", "装配检测"："","调试检测"：""}
    1. 创建组和组长：
        URL: http://192.168.130.168:80/user/group/?group=电气&master=jack&token="xxx"
        接口：@app.post("/user/group/")
                    async def user_group_create(group：str, master：str, token:str):
                返回格式: {"错误"："", "组名"："电气"，"组成员角色"：["组长"]，"成员"：["",""], "组长"：""}

    2. 删除组：
        URL: http://192.168.130.168:80/user/group/?group=电气&token="xxx"
        接口：@app.delete("/user/group/")
                    async def user_group_del(group：str, token:str):
                返回格式: {"错误"：""}

    3. 查询组：
        URL: http://192.168.130.168:80/user/group/?group=电气&token="xxx"
        接口：@app.get("/user/group/")
                    async def user_group_get(group：str, token:str):
                返回格式: {"错误"："", "组名"："电气"，"组成员角色"：["组长"，"电工"，"外协"，"装配检测","调试检测"]，"成员"：["",""], "组长"：""，"电工"："", "外协"："", "装配检测"："","调试检测"：""}

    3. 查询所有组：
        URL: http://192.168.130.168:80/user/groups/?token="xxx"
        接口：@app.get("/user/groups/")
                    async def user_groups_get(group：str, token:str):
                返回格式: {"错误"："", "组"：[{"组名"："电气"，"组成员角色"：["组长"，"电工"，"外协"，"装配检测","调试检测"]，"成员"：["",""], "组长"：""，"电工"："", "外协"："", "装配检测"："","调试检测"：""}]}

    4. 增加组成员
        URL: http://192.168.130.168:80/user/group/member/?group=xxx&member=xxx&token="xxx"
        接口：@app.post("/user/group/member/")
                async def user_group_member_create(group：str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"成员"：["",""]}

    5. 删除组成员
        URL: http://192.168.130.168:80/user/group/member/?group=xxx&member=xxx&token="xxx"
        接口：@app.delete("/user/group/member/")
                async def user_group_member_del(group：str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"成员"：["",""]}

    5. 查询组成员
        URL: http://192.168.130.168:80/user/group/member/?group=xxx&token="xxx"
        接口：@app.get("/user/group/member/")
                async def user_group_member_get(group：str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"成员"：["",""]}

    6. 增加组角色
        URL: http://192.168.130.168:80/user/group/role/?group=xxx&role=xxx&token="xxx"
        接口：@app.post("/user/group/role/")
                async def user_group_role_create(group：str, role:str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"角色"：["",""]}

    7. 删除组角色
        URL: http://192.168.130.168:80/user/group/role/?group=xxx&role=xxx&token="xxx"
        接口：@app.delete("/user/group/role/")
                async def user_group_role_del(group：str, role:str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"角色"：["",""]}

    8. 查询组角色
        URL: http://192.168.130.168:80/user/group/role/?group=xxx&token="xxx"
        接口：@app.get("/user/group/role/")
                async def user_group_role_get(group：str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"角色"：["",""]}

    9. 增加成员角色
        URL: http://192.168.130.168:80/user/group/memRole/?group=xxx&member=xxx&memRole=xxx&token="xxx"
        接口：@app.post("/user/group/memRole/")
                async def user_group_create(group：str, member:str, memRole:str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"memRole"：["",""]}

    10. 删除成员角色
        URL: http://192.168.130.168:80/user/group/memRole/?group=xxx&member=xxx&memRole=xxx&token="xxx"
        接口：@app.delete("/user/group/memRole/")
                async def user_group_del(group：str, member:str, memRole:str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"memRole"：["",""]}

    11. 查询成员角色
        URL: http://192.168.130.168:80/user/group/memRole/?group=xxx&token="xxx"
        接口：@app.get("/user/group/memRole/")
                async def user_group_get(group：str, token:str):
            返回格式: {"错误"："", "组名"："电气"，"memRole"：["",""]}

# 5. 消息管理
    ## 5.1 业务需求
    ## 5.1.1 消息管理
        每个更新数据库的操作都有一个消息，每个消息按照配置文件发送到指定的角色，消息发送有掩码，可以设置消息不发送到某个人。
        消息查看后删除数据库消息。

    ### 5.2 详细设计
        数据库用户消息表定义：user : message
        {"张工"："电气器件异常，等待排查"}

        查询用户的消息
        URL: http://192.168.130.168:80/user/msg/?member=xxx&token="xxx"
        接口：@app.get("/user/msg/")
                async def user_msg_get(member:str, token:str):
            返回格式: {"错误"："", "消息"：["装配完成，等待验收"，"电气器件异常，等待排查"]}

        删除用户的消息
        URL: http://192.168.130.168:80/user/msg/?member=xxx&token="xxx"
        接口：@app.delete("/user/msg/")
                async def user_msg_get(member:str, token:str):
            返回格式: {"错误"："", "消息"：[]}

# 6. 流程管理
## 6.1 业务需求
## 6.1.1 流程管理
    生产任务： 1.生产任务创建
              2.生产任务资料上传
    
    采购流程：1.创建物料采购计划
             2.物料检查
             3.物料入库
             4.采购物料确认

    装配流程： 1.物料出库
              2.机器装配任务下发
              3.机器整机装配验收申请
              4.机器整机装配验收

    调试： 1. 调试任务下发
          2. 调试情况上报
          3. 调试验收申请
          4. 调试验收
    
    入库生产：1.入库